(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,t,a){e.exports=a.p+"static/media/3.6f3cce1c.jpg"},277:function(e,t,a){},278:function(e,t,a){},300:function(e,t,a){e.exports=a.p+"static/media/1.15f33718.jpg"},301:function(e,t,a){e.exports=a.p+"static/media/2.4b150143.jpg"},342:function(e,t,a){e.exports=a(644)},350:function(e,t,a){},560:function(e,t,a){},641:function(e,t,a){},642:function(e,t,a){},643:function(e,t,a){},644:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(24),c=a.n(l),o=(a(347),a(348),a(8)),i=a(195),u=a(68),s=(a(349),a(350),a(294)),m=a(648),d=a(649),E=a(293),f=a(654),h=a(56),p=a.n(h),g=a(145),v=a(146),b=a.n(v);function y(e,t){return j.apply(this,arguments)}function j(){return(j=Object(g.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.a.post(t,a));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return C.apply(this,arguments)}function C(){return(C=Object(g.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.a.get(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return k.apply(this,arguments)}function k(){return(k=Object(g.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.a.put(t,a));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=[49.0139,31.2858],S=function(e){var t=r.a.useState(""),a=Object(o.a)(t,2),n=a[0],l=a[1],c=r.a.useState(""),i=Object(o.a)(c,2),u=i[0],h=i[1];return r.a.createElement(m.a,null,r.a.createElement(d.a,{className:"justify-content-center"},r.a.createElement(E.a,{xs:6},r.a.createElement(f.a,null,r.a.createElement(f.a.Group,{controlId:"formUsername"},r.a.createElement(f.a.Label,null,"Username"),r.a.createElement(f.a.Control,{type:"input",placeholder:"Enter username",value:n,onChange:function(e){return l(e.target.value)}})),r.a.createElement(f.a.Group,{controlId:"formBasicPassword"},r.a.createElement(f.a.Label,null,"Password"),r.a.createElement(f.a.Control,{type:"password",placeholder:"Password",value:u,onChange:function(e){return h(e.target.value)}})),r.a.createElement(s.a,{variant:"primary",onClick:function(){y("/login",{login:n,password:u}).then((function(t){var a=t.data;a?(e.onHide(),e.setUser(a),sessionStorage.setItem("user",JSON.stringify(a))):alert("Incorrect login/password")}))}},"Login")))))},w=a(655),I=function(e){return r.a.createElement(w.a,Object.assign({},e,{size:e.size||"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),r.a.createElement(w.a.Header,{closeButton:!0},r.a.createElement(w.a.Title,{id:"contained-modal-title-vcenter"},e.header)),r.a.createElement(w.a.Body,null,e.children),r.a.createElement(w.a.Footer,null,r.a.createElement(s.a,{onClick:e.onHide},"\u0417\u0430\u043a\u0440\u0438\u0442\u0438")))},P=function(e){var t=r.a.useState(!1),a=Object(o.a)(t,2),n=a[0],l=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{variant:"primary",onClick:function(){return l(!0)}},"\u0423\u0432\u0456\u0439\u0442\u0438"),r.a.createElement(I,{show:n,onHide:function(){return l(!1)},header:"\u0423\u0432\u0456\u0439\u0442\u0438 \u0434\u043e \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0430\u043a\u0430\u0443\u043d\u0442\u0443"},r.a.createElement(S,{onHide:function(){return l(!1)},setUser:e.setUser})))},M=a(109),N=a(650),F={selected:null,environments:[]},z=Object(n.createContext)(F),D=function(e){var t=e.user,a=e.setUser,l=Object(u.f)(),c=Object(n.useContext)(z),o=c.environmentsInfo,i=c.setEnvironmentsInfo,m=function(e){var t=o.selected;return!!t&&e===t.id};return r.a.createElement(M.a,{className:"justify-content-between container mt-2 mb-2"},r.a.createElement(M.a.Item,{className:"d-flex align-items-center"},r.a.createElement(M.a.Link,{variant:"link",onClick:function(){return i({selected:null,environments:o.environments}),void l.push("/")}},"\u0414\u043e\u043c\u0430\u0448\u043d\u044f \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0430"),r.a.createElement(N.a,{title:"\u041a\u0430\u0440\u0442\u0438 \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u044c"},o.environments.map((function(e){var t=e.id,a=e.name;return r.a.createElement(N.a.Item,{onClick:function(){return function(e){var t=o.environments.find((function(t){return+t.id===+e}));i({selected:t,environments:o.environments}),l.push("/earth")}(t)},key:t,active:m(t)},a)})))),r.a.createElement(M.a.Item,null,t?r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("h4",{className:"mr-2 mb-0"},"\u0412\u0456\u0442\u0430\u0454\u043c\u043e, ",t.user_name," (",t.expert_name,")"),r.a.createElement(s.a,{variant:"outline-secondary",size:"md",onClick:function(){a(null),sessionStorage.removeItem("user")}},"\u0412\u0438\u0439\u0442\u0438")):r.a.createElement(P,{setUser:a})))},A=a(658),G=a(300),L=a.n(G),H=a(301),T=a.n(H),U=a(106),B=a.n(U),W=function(){return r.a.createElement(A.a,{className:"carousel"},r.a.createElement(A.a.Item,null,r.a.createElement("img",{className:"w-100",src:L.a,alt:"First slide"}),r.a.createElement(A.a.Caption,null,r.a.createElement("h3",null,"\u0423\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f \u0432\u043e\u0434\u043d\u0438\u043c\u0438 \u0440\u0435\u0441\u0443\u0440\u0441\u0430\u043c\u0438"))),r.a.createElement(A.a.Item,null,r.a.createElement("img",{className:"w-100",src:T.a,alt:"Second slide"}),r.a.createElement(A.a.Caption,null,r.a.createElement("h3",null,"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u0438\u0439 \u0435\u043a\u043e\u043b\u043e\u0433\u043e-\u0435\u043a\u043e\u043d\u043e\u043c\u0456\u0447\u043d\u0438\u0439 \u043c\u043e\u043d\u0456\u0442\u043e\u0440\u0438\u043d\u0433"))),r.a.createElement(A.a.Item,null,r.a.createElement("img",{className:"w-100",src:B.a,alt:"Third slide"}),r.a.createElement(A.a.Caption,null,r.a.createElement("h3",null,"\u0423\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f \u0432\u0456\u0434\u0445\u043e\u0434\u0430\u043c\u0438"))),r.a.createElement(A.a.Item,null,r.a.createElement("img",{className:"w-100",src:B.a,alt:"Fourth slide"}),r.a.createElement(A.a.Caption,null,r.a.createElement("h3",null,"\u041e\u0445\u043e\u0440\u043e\u043d\u0430 \u0437\u0435\u043c\u0435\u043b\u044c"))),r.a.createElement(A.a.Item,null,r.a.createElement("img",{className:"w-100",src:B.a,alt:"Fifth slide"}),r.a.createElement(A.a.Caption,null,r.a.createElement("h3",null,"\u0410\u0442\u043c\u043e\u0441\u0444\u0435\u0440\u043d\u0435 \u043f\u043e\u0432\u0456\u0442\u0440\u044f"))),r.a.createElement(A.a.Item,null,r.a.createElement("img",{className:"w-100",src:B.a,alt:"Sixth slide"}),r.a.createElement(A.a.Caption,null,r.a.createElement("h3",null,"\u0417\u0434\u043e\u0440\u043e\u0432'\u044f \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043d\u044f"))))},J=a(661),K=function(){return r.a.createElement(J.a,null,r.a.createElement("h4",null,"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u0438\u0439 \u0435\u043a\u043e\u043b\u043e\u0433\u043e-\u0435\u043a\u043e\u043d\u043e\u043c\u0456\u0447\u043d\u0438\u0439 \u043c\u043e\u043d\u0456\u0442\u043e\u0440\u0438\u043d\u0433 (\u041a\u0415\u0415\u041c) \u0431\u0430\u0437\u0443\u0454\u0442\u044c\u0441\u044f \u043d\u0430 \u0442\u0430\u043a\u0438\u0445 \u043e\u0441\u043d\u043e\u0432\u043d\u0438\u0445 \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u0430\u0445:"),r.a.createElement(J.a.Item,null,"\u0417\u0431\u0456\u0440 \u0440\u0456\u0437\u043d\u043e\u0440\u0456\u0434\u043d\u043e\u0457 \u0435\u043a\u043e\u043b\u043e\u0433\u0456\u0447\u043d\u043e\u0457 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u0457 \u0437 \u0440\u0456\u0437\u043d\u0438\u0445 \u0442\u043e\u0447\u043e\u043a \u0440\u0435\u0433\u0456\u043e\u043d\u0443."),r.a.createElement(J.a.Item,null,"\u041e\u0431\u0440\u043e\u0431\u043b\u0435\u043d\u043d\u044f \u0432\u0435\u043b\u0438\u043a\u0438\u0445 \u043c\u0430\u0441\u0438\u0432\u0456\u0432 \u0434\u0430\u043d\u0438\u0445 \u0440\u0456\u0437\u043d\u0438\u043c\u0438 \u0435\u043a\u0441\u043f\u0435\u0440\u0442\u0430\u043c\u0438."),r.a.createElement(J.a.Item,null,"\u041e\u0434\u043d\u043e\u0447\u0430\u0441\u043d\u0430 \u0440\u043e\u0431\u043e\u0442\u0430 \u0440\u0456\u0437\u043d\u0438\u0445 \u0435\u043a\u0441\u043f\u0435\u0440\u0442\u0456\u0432 \u0437 \u0435\u043a\u043e\u043b\u043e\u0433\u0456\u0447\u043d\u043e\u044e \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u0454\u044e \u0442\u0430 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u0454\u044e \u0432\u0456\u0434 \u0456\u043d\u0448\u0438\u0445 \u0435\u043a\u0441\u043f\u0435\u0440\u0442\u0456\u0432."),r.a.createElement(J.a.Item,null,"\u0412\u0456\u0434\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u0435\u043a\u043e\u043b\u043e\u0433\u0456\u0447\u043d\u043e\u0457 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u0457 \u043d\u0430 \u043a\u0430\u0440\u0442\u0456 \u043c\u0456\u0441\u0446\u0435\u0432\u043e\u0441\u0442\u0456 \u0434\u043b\u044f \u043d\u0430\u043e\u0447\u043d\u043e\u0441\u0442\u0456."),r.a.createElement(J.a.Item,null,"\u0414\u043e\u0441\u043b\u0456\u0434\u0436\u0435\u043d\u043d\u044f \u0435\u043a\u043e\u043b\u043e\u0433\u0456\u0447\u043d\u043e\u0457 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u0457 \u0437\u0430 \u0434\u043e\u043f\u043e\u043c\u043e\u0433\u043e\u044e \u0440\u0456\u0437\u043d\u0438\u0445 \u0432\u0438\u0434\u0456\u0432 \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u043d\u043e\u0433\u043e \u0430\u043d\u0430\u043b\u0456\u0437\u0443."),r.a.createElement(J.a.Item,null,"\u041e\u0446\u0456\u043d\u043a\u0430 \u0441\u0438\u0442\u0443\u0430\u0446\u0456\u0457 \u0443 \u0432\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043e\u043c\u0443 \u0440\u0435\u0433\u0456\u043e\u043d\u0456 \u0437 \u0442\u043e\u0447\u043a\u0438 \u0437\u043e\u0440\u0443 \u0437\u0430\u043a\u043e\u043d\u0443 \u0442\u0430 \u0432\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u0437\u0430\u043a\u043e\u043d\u043d\u043e\u0441\u0442\u0456 \u043d\u0430\u0431\u043e\u0440\u0443 \u0437\u0430\u0445\u043e\u0434\u0456\u0432 \u043f\u043e \u043f\u043e\u043a\u0440\u0430\u0449\u0435\u043d\u043d\u044e \u0435\u043a\u043e\u043b\u043e\u0433\u0456\u0447\u043d\u043e\u0433\u043e \u0441\u0442\u0430\u043d\u0443 \u0440\u0435\u0433\u0456\u043e\u043d\u0443 \u0430\u0431\u043e \u043b\u0456\u043a\u0432\u0456\u0434\u0430\u0446\u0456\u0457 \u043d\u0430\u0441\u043b\u0456\u0434\u043a\u0456\u0432 \u043d\u0430\u0434\u0437\u0432\u0438\u0447\u0430\u0439\u043d\u0438\u0445 \u0441\u0438\u0442\u0443\u0430\u0446\u0456\u0439."))},R=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,null),r.a.createElement(m.a,null,r.a.createElement(d.a,{className:"justify-content-center mt-5 mb-5"},r.a.createElement(E.a,{xs:12},r.a.createElement(K,null)))))},V=a(53),q=a(657),Y=a(660),Z=a(663),$=(a(90),function(e,t){return e.filter((function(e,a,n){return n.map((function(e){return e[t]})).indexOf(e[t])===a}))}),Q=function(e){var t=[];return e.forEach((function(e){t.includes(e.element)||t.push(e.element)})),t.reduce((function(t,a){var n=[];return e.forEach((function(e){a===e.element&&n.push({name:"".concat(e.date.day,"-").concat(e.date.month,"-").concat(e.date.year),"\u0421\u0435\u0440\u0435\u0434\u043d\u0454 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f":e.averageCalculations.average,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f":e.maximumCalculations.max})})),t[a]=n,t}),{})},X=a(659),ee=a(662),te=a(651),ae=a(136),ne=a(143),re=a(303),le=a(43),ce=["#0088FE","#00C49F","#FFBB28","#FF8042"],oe=function(e){var t=e.title,a=e.data,n=a.map((function(e){return Object(re.a)({},e,{value:+e.value.toFixed(4)})}));return r.a.createElement("div",null,r.a.createElement("h3",null,t),r.a.createElement(le.f,{width:400,height:400},r.a.createElement(le.e,{data:n,cx:200,cy:200,label:!0,labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",isAnimationActive:!1},a.map((function(e,t){return r.a.createElement(le.b,{key:"cell-".concat(t),fill:ce[t%ce.length]})})))))},ie=a(314),ue=a(27),se=a(656),me=function(e){var t=e.id,a=e.param,l=e.setEmissionCalculations,c=Object(n.useContext)(z).environmentsInfo,i=r.a.useState([{startDate:new Date,endDate:Object(ue.a)(new Date,7),key:"selection"}]),u=Object(o.a)(i,2),s=u[0],m=u[1];return r.a.useEffect((function(){var e=Object(o.a)(s,1)[0],n=c.selected.id;O("".concat("/emissionscalculations","?idEnvironment=").concat(n,"&").concat(a,"=").concat(t,"&startDate=").concat(e.startDate.toISOString(),"&endDate=").concat(e.endDate.toISOString())).then((function(e){var t=e.data;return l(t)}))}),[t,s]),r.a.createElement(ie.DateRangePicker,{locale:se.a,onChange:function(e){return m([e.selection])},showSelectionPreview:!0,moveRangeOnFirstSelection:!1,months:2,ranges:s,direction:"horizontal"})},de=a(76),Ee=function(e){var t=e.emissions,a=r.a.useState(""),n=Object(o.a)(a,2),l=n[0],c=n[1];return t?r.a.createElement("div",null,Object.keys(t).length>0&&r.a.createElement(de.a,{className:"mr-2 mb-2"},r.a.createElement(de.a.Toggle,{size:"md"},l||"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0435\u043b\u0435\u043c\u0435\u043d\u0442"),r.a.createElement(de.a.Menu,null,t&&Object.keys(t).map((function(e){return r.a.createElement(de.a.Item,{key:e,active:e===l,onClick:function(){c(e)}},e)})))),Object.keys(t).length>0&&l&&r.a.createElement(le.d,{width:500,height:200,data:t[l],margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement(le.a,{strokeDasharray:"3 3"}),r.a.createElement(le.h,{dataKey:"name"}),r.a.createElement(le.i,null),r.a.createElement(le.g,null),r.a.createElement(le.c,{connectNulls:!0,type:"monotone",dataKey:"\u0421\u0435\u0440\u0435\u0434\u043d\u0454 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f",stroke:"#8884d8"}),r.a.createElement(le.c,{connectNulls:!0,type:"monotone",dataKey:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f",stroke:"#82ca9d"}))):null},fe=(a(560),function(e){var t=e.id,a=e.isPoint,l=e.onHide,c=e.show,i=(e.emissions,Object(n.useContext)(z).environmentsInfo),u=a?"idPoi":"idPolygon",s=r.a.useState([]),m=Object(o.a)(s,2),d=m[0],E=m[1];r.a.useEffect((function(){f(t)}),[t]);var f=function(e){var t=i.selected.id;O("".concat("/emissionscalculations","?idEnvironment=").concat(t,"&").concat(u,"=").concat(e)).then((function(e){var t=e.data;return E(t)}))},h=d&&d.length>0?function(e){var t=[];return e.forEach((function(e){t.includes(e.element)||t.push(e.element)})),t.map((function(t){var a={name:t,quantity:0,total:0};return e.forEach((function(e){a.name===e.element&&(a.total+=e.averageCalculations.average,a.quantity++)})),{name:a.name,value:a.total/a.quantity}}))}(d):[],p=d&&d.length>0?function(e){var t=[];return e.forEach((function(e){t.includes(e.element)||t.push(e.element)})),t.map((function(t){var a={name:t,value:0};return e.forEach((function(e){a.name===e.element&&e.maximumCalculations.max>a.value&&(a.value=e.maximumCalculations.max)})),a}))}(d):[];return r.a.createElement(I,{size:"xl",show:c,onHide:l,header:"\u0412\u0456\u0434\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u0438 \u0432\u0438\u043a\u0438\u0434\u0438"},r.a.createElement("h4",{className:"mb-3"},"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0434\u0430\u0442\u0438 \u0434\u043b\u044f \u0432\u0456\u0434\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u0432\u0438\u043a\u0438\u0434\u0456\u0432 \u0437\u0430 \u043f\u0435\u0432\u043d\u0438\u0439 \u043f\u0435\u0440\u0456\u043e\u0434"),r.a.createElement(me,{id:t,param:u,setEmissionCalculations:E}),d.length>0?r.a.createElement(te.a,{className:"emissions-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{title:"\u0415\u043b\u0435\u043c\u0435\u043d\u0442"},"\u0415\u043b\u0435\u043c\u0435\u043d\u0442"),r.a.createElement("th",{title:"\u0414\u0430\u0442\u0430"},"\u0414\u0430\u0442\u0430"),r.a.createElement("th",{title:"\u041e\u0434\u0438\u043d\u0438\u0446\u044f \u0432\u0438\u043c\u0456\u0440\u0443"},"\u041e\u0434\u0438\u043d\u0438\u0446\u044f \u0432\u0438\u043c\u0456\u0440\u0443"),r.a.createElement("th",{title:"\u0421\u0435\u0440\u0435\u0434\u043d\u0454 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f average \u0432\u0438\u043a\u0438\u0434\u0456\u0432"},"\u0421\u0435\u0440\u0435\u0434\u043d\u0454 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f average \u0432\u0438\u043a\u0438\u0434\u0456\u0432"),r.a.createElement("th",{title:"\u0413\u0414\u041a average"},"\u0413\u0414\u041a average"),r.a.createElement("th",{title:"\u041f\u0435\u0440\u0435\u0432\u0438\u0449\u0435\u043d\u043d\u044f \u0413\u0414\u041a average"},"\u041f\u0435\u0440\u0435\u0432\u0438\u0449\u0435\u043d\u043d\u044f \u0413\u0414\u041a average"),r.a.createElement("th",{title:"Max \u0432\u0438\u043a\u0438\u0434\u0456\u0432"},"Max \u0432\u0438\u043a\u0438\u0434\u0456\u0432"),r.a.createElement("th",{title:"\u0413\u0414\u041a max"},"\u0413\u0414\u041a max"),r.a.createElement("th",{title:"\u041f\u0435\u0440\u0435\u0432\u0438\u0449\u0435\u043d\u043d\u044f \u0413\u0414\u041a max"},"\u041f\u0435\u0440\u0435\u0432\u0438\u0449\u0435\u043d\u043d\u044f \u0413\u0414\u041a max"))),r.a.createElement("tbody",null,d.map((function(e,t){var a=e.averageCalculations.gdkAverage?(e.averageCalculations.gdkAverage-e.averageCalculations.average).toFixed(2):"\u041d\u0435\u043c\u0430\u0454 \u0434\u0430\u043d\u0438\u0445",n=e.maximumCalculations.gdkMax?(e.maximumCalculations.gdkMax-e.maximumCalculations.max).toFixed(2):"\u041d\u0435\u043c\u0430\u0454 \u0434\u0430\u043d\u0438\u0445";return r.a.createElement("tr",{key:t},r.a.createElement("td",{title:e.element},e.element),r.a.createElement("td",{title:e.date},"".concat(e.date.day,"/").concat(e.date.month,"/").concat(e.date.year)),r.a.createElement("td",{title:e.measure},e.measure),r.a.createElement("td",{title:e.averageCalculations.average},e.averageCalculations.average.toFixed(2)),r.a.createElement("td",{title:e.averageCalculations.gdkAverage||"\u041d\u0435\u043c\u0430\u0454 \u0434\u0430\u043d\u0438\u0445"},e.averageCalculations.gdkAverage||"\u041d\u0435\u043c\u0430\u0454 \u0434\u0430\u043d\u0438\u0445"),r.a.createElement("td",{title:a},a),r.a.createElement("td",{title:e.maximumCalculations.max},e.maximumCalculations.max.toFixed(2)),r.a.createElement("td",{title:e.maximumCalculations.gdkMax||"\u041d\u0435\u043c\u0430\u0454 \u0434\u0430\u043d\u0438\u0445"},e.maximumCalculations.gdkMax||"\u041d\u0435\u043c\u0430\u0454 \u0434\u0430\u043d\u0438\u0445"),r.a.createElement("td",{title:n},n))})))):r.a.createElement("h6",{className:"mt-3 mb-3"},"\u041d\u0435\u043c\u0430\u0454 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u0457 \u043f\u0440\u043e \u0432\u0438\u043a\u0438\u0434\u0438 \u0437\u0430 \u043e\u0431\u0440\u0430\u043d\u0438\u0439 \u043f\u0435\u0440\u0456\u043e\u0434"),r.a.createElement("div",{className:"d-flex justify-content-around"},h.length>0&&r.a.createElement(oe,{title:"\u0413\u0440\u0430\u0444\u0456\u043a \u0441\u0435\u0440\u0435\u0434\u043d\u0456\u0445 \u0432\u0438\u043a\u0438\u0434\u0456\u0432",data:h}),p.length>0&&r.a.createElement(oe,{title:"\u0413\u0440\u0430\u0444\u0456\u043a \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0438\u0445 \u0432\u0438\u043a\u0438\u0434\u0456\u0432",data:p})),d.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"mb-3"},"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0435\u043b\u0435\u043c\u0435\u043d\u0442 \u0442\u0430 \u0434\u043b\u044f \u0432\u0456\u0434\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u0432\u0438\u043a\u0438\u0434\u0456\u0432 \u0437\u0430 \u0434\u043e\u043f\u043e\u043c\u043e\u0433\u043e\u044e \u0433\u0440\u0430\u0444\u0456\u043a\u0430"),r.a.createElement(Ee,{emissions:Q(d)})))}),he=(a(277),!1),pe=function(e){var t=e.polygons,a=e.setPolygonId,n=e.setIsEditPolygonMode,l=e.setShowPolygonModal,c=r.a.useState(he),i=Object(o.a)(c,2),u=i[0],m=i[1];return r.a.createElement(r.a.Fragment,null,t.map((function(e){var t=e.poligonId,c=e.polygonPoints,o=e.brushColorR,i=e.brushColorG,d=e.brushColorB,E=e.user_name,f=e.name,h=e.emissions;return r.a.createElement(X.a,{key:t,positions:c,color:"rgba(".concat(o,", ").concat(i,", ").concat(d,", 1)")},r.a.createElement(ee.a,{maxWidth:"auto"},r.a.createElement(ae.a,{icon:ne.a,onClick:function(){return a(t),n(!0),void l(!0)},className:"edit-pencil-icon"}),r.a.createElement("div",{className:"mt-4 mb-2"},f&&r.a.createElement("div",null,r.a.createElement("strong",null,"\u041d\u0430\u0437\u0432\u0430:")," ",f),E&&r.a.createElement("div",null,r.a.createElement("strong",null,"\u041a\u0435\u0440\u0456\u0432\u043d\u0438\u043a \u044f\u043a\u0438\u0439 \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0432:")," ",E)),h&&h.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(te.a,{striped:!0,bordered:!0,hover:!0,size:"sm",className:"emissions-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{title:"\u0425\u0456\u043c\u0456\u0447\u043d\u0438\u0439 \u0435\u043b\u0435\u043c\u0435\u043d\u0442"},"\u0425\u0456\u043c\u0456\u0447\u043d\u0438\u0439 \u0435\u043b\u0435\u043c\u0435\u043d\u0442"),r.a.createElement("th",{title:"\u0421\u0435\u0440\u0435\u0434\u043d\u0454 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f"},"\u0421\u0435\u0440\u0435\u0434\u043d\u0454 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f"),r.a.createElement("th",{title:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f"},"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f"),r.a.createElement("th",{title:"\u0420\u0456\u043a"},"\u0420\u0456\u043a"),r.a.createElement("th",{title:"\u041c\u0456\u0441\u044f\u0446\u044c"},"\u041c\u0456\u0441\u044f\u0446\u044c"),r.a.createElement("th",{title:"\u0414\u0435\u043d\u044c"},"\u0414\u0435\u043d\u044c"),r.a.createElement("th",{title:"\u041e\u0434\u0438\u043d\u0438\u0446\u044f \u0432\u0438\u043c\u0456\u0440\u0443"},"\u041e\u0434\u0438\u043d\u0438\u0446\u044f \u0432\u0438\u043c\u0456\u0440\u0443"))),r.a.createElement("tbody",null,h.map((function(e,t){var a=e.short_name,n=e.ValueAvg,l=e.ValueMax,c=e.Year,o=e.Month,i=e.day,u=e.Measure;return r.a.createElement("tr",{key:t},r.a.createElement("td",{title:a},a),r.a.createElement("td",{title:n},n),r.a.createElement("td",{title:l},l),r.a.createElement("td",{title:c},c),r.a.createElement("td",{title:o},o),r.a.createElement("td",{title:i},i),r.a.createElement("td",{title:u},u))})))),r.a.createElement(s.a,{size:"sm",onClick:function(){return m(!0)}},"\u0412\u0456\u0434\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u0438 \u0433\u0440\u0430\u0444\u0456\u043a\u0438 \u0432\u0438\u043a\u0438\u0434\u0456\u0432")),r.a.createElement(fe,{id:t,emissions:h,show:u,onHide:function(){return m(!1)}})))})))},ge=a(652),ve=a(317),be=function(e){var t=e.points,a=e.setShowPointModal,n=e.setPointId,l=e.setIsEditPointMode,c=r.a.useState(!1),i=Object(o.a)(c,2),u=i[0],m=i[1];return r.a.createElement(r.a.Fragment,null,t.map((function(e){var t=e.Id,c=e.coordinates,o=e.name,i=e.Description,d=e.Image,E=e.emissions,f=e.owner_type;return r.a.createElement(ge.a,{key:t,position:c,icon:new ve.a({iconUrl:d,iconSize:[20,30]})},r.a.createElement(ee.a,{maxWidth:"auto"},r.a.createElement(ae.a,{icon:ne.a,onClick:function(){return function(e){n(e),l(!0),a(!0)}(t)},className:"edit-pencil-icon"}),r.a.createElement("div",{className:"mt-4 mb-2"},o&&r.a.createElement("div",null,r.a.createElement("strong",null,"\u041d\u0430\u0437\u0432\u0430:")," ",o),i&&r.a.createElement("div",null,r.a.createElement("strong",null,"\u041e\u043f\u0438\u0441:")," ",i),f&&r.a.createElement("div",null,r.a.createElement("strong",null,"\u0424\u043e\u0440\u043c\u0430 \u0432\u043b\u0430\u0441\u043d\u043e\u0441\u0442\u0456:")," ",f.name)),E.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(te.a,{striped:!0,bordered:!0,hover:!0,size:"sm",className:"emissions-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{title:"\u0425\u0456\u043c\u0456\u0447\u043d\u0438\u0439 \u0435\u043b\u0435\u043c\u0435\u043d\u0442"},"\u0425\u0456\u043c\u0456\u0447\u043d\u0438\u0439 \u0435\u043b\u0435\u043c\u0435\u043d\u0442"),r.a.createElement("th",{title:"\u0421\u0435\u0440\u0435\u0434\u043d\u0454 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f"},"\u0421\u0435\u0440\u0435\u0434\u043d\u0454 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f"),r.a.createElement("th",{title:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f"},"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f"),r.a.createElement("th",{title:"\u0420\u0456\u043a"},"\u0420\u0456\u043a"),r.a.createElement("th",{title:"\u041c\u0456\u0441\u044f\u0446\u044c"},"\u041c\u0456\u0441\u044f\u0446\u044c"),r.a.createElement("th",{title:"\u0414\u0435\u043d\u044c"},"\u0414\u0435\u043d\u044c"),r.a.createElement("th",{title:"\u041e\u0434\u0438\u043d\u0438\u0446\u044f \u0432\u0438\u043c\u0456\u0440\u0443"},"\u041e\u0434\u0438\u043d\u0438\u0446\u044f \u0432\u0438\u043c\u0456\u0440\u0443"))),r.a.createElement("tbody",null,E.map((function(e,t){var a=e.short_name,n=e.ValueAvg,l=e.ValueMax,c=e.Year,o=e.Month,i=e.day,u=e.Measure;return r.a.createElement("tr",{key:t},r.a.createElement("td",{title:a},a),r.a.createElement("td",{title:n},n),r.a.createElement("td",{title:l},l),r.a.createElement("td",{title:c},c),r.a.createElement("td",{title:o},o),r.a.createElement("td",{title:i},i),r.a.createElement("td",{title:u},u))})))),r.a.createElement(s.a,{size:"sm",onClick:function(){return m(!0)}},"\u0412\u0456\u0434\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u0438 \u0433\u0440\u0430\u0444\u0456\u043a\u0438 \u0432\u0438\u043a\u0438\u0434\u0456\u0432")),r.a.createElement(fe,{isPoint:!0,id:t,emissions:E,show:u,onHide:function(){return m(!1)}})))})))},ye=a(653),je=(a(278),new Date),Oe=je.getFullYear(),Ce=("0"+(je.getMonth()+1)).slice(-2),xe=("0"+je.getDate()).slice(-2),ke={form:{date:je,valueAvg:0,valueMax:0,gdk:1e5,element:{code:0,short_name:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0435\u043b\u0435\u043c\u0435\u043d\u0442"},measure:""}},_e=function(e){var t=e.onSave,a=Object(n.useContext)(z).environmentsInfo,l=Object(n.useState)(!1),c=Object(o.a)(l,2),i=c[0],u=c[1],m=i?"\u0421\u0445\u043e\u0432\u0430\u0442\u0438":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u0431\u0456\u043b\u044c\u0448\u0435",d=Object(n.useState)(ke.form.date),E=Object(o.a)(d,2),h=E[0],p=E[1],g=Object(n.useState)(ke.form.valueAvg),v=Object(o.a)(g,2),b=v[0],j=v[1],C=Object(n.useState)(ke.form.gdk),x=Object(o.a)(C,2),k=x[0],_=x[1],S=Object(n.useState)(ke.form.valueMax),w=Object(o.a)(S,2),I=w[0],P=w[1],M=Object(n.useState)(ke.form.gdk),N=Object(o.a)(M,2),F=N[0],D=N[1],A=Object(n.useState)([]),G=Object(o.a)(A,2),L=G[0],H=G[1],T=Object(n.useState)(ke.form.element),U=Object(o.a)(T,2),B=U[0],W=U[1],J=Object(n.useState)(ke.form.measure),K=Object(o.a)(J,2),R=K[0],V=K[1],q=function(){p(ke.form.date),j(ke.form.valueAvg),_(ke.form.gdk),P(ke.form.valueMax),D(ke.form.gdk),W(ke.form.element),V(ke.form.measure)};return Object(n.useEffect)((function(){O("/elements").then((function(e){var t=e.data;return H(t)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(s.a,{onClick:function(){q(),u(!i)}},m)),i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0434\u0430\u0442\u0443"),r.a.createElement(f.a.Control,{type:"date",value:h,onChange:function(e){new Date(e.target.value)>je?p("".concat(Oe,"-").concat(Ce,"-").concat(xe)):p(e.target.value)}})),r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0441\u0435\u0440\u0435\u0434\u043d\u0454 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f"),r.a.createElement(f.a.Control,{type:"number",min:"0",value:b,onChange:function(e){return j(+e.target.value)}})),k>0&&k<b&&r.a.createElement(ye.a,{variant:"danger"},"\u0421\u0435\u0440\u0435\u0434\u043d\u0454 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u043f\u0435\u0440\u0435\u0432\u0438\u0449\u0443\u0454 \u0413\u0414\u041a (",k,")"),r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"\u0412\u0412\u0435\u0434\u0456\u0442\u044c \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f"),r.a.createElement(f.a.Control,{type:"number",min:"0",value:I,onChange:function(e){return P(+e.target.value)}})),F>0&&F<I&&r.a.createElement(ye.a,{variant:"danger"},"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u043f\u0435\u0440\u0435\u0432\u0438\u0449\u0443\u0454 \u0413\u0414\u041a(",F,")"),r.a.createElement(f.a.Group,null,r.a.createElement(de.a,null,r.a.createElement(de.a.Toggle,{size:"sm",variant:"success"},B.short_name),r.a.createElement(de.a.Menu,{className:"form-dropdown"},L.length&&L.map((function(e){return r.a.createElement(de.a.Item,{key:e.code,onClick:function(){return function(e){W(e),V(e.measure),y("/gdk",{code:e.code,environment:a.selected.id}).then((function(e){var t=e.data;t.average&&t.max?(_(t.average),D(t.max)):(_(ke.form.valueAvg),D(ke.form.valueMax))}))}(e)}},e.short_name)}))))),R&&r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"\u0420\u043e\u0437\u043c\u0456\u0440\u043d\u0456\u0441\u0442\u044c"),r.a.createElement(f.a.Control,{type:"input",disabled:!0,value:R}))),r.a.createElement(s.a,{variant:"outline-primary",onClick:function(){var e;if(i&&h){var n=h.split("-"),r=Object(o.a)(n,3),l=r[0],c=r[1],u=r[2];e=i&&{valueAvg:b,valueMax:I,year:l,month:c,day:u,idElement:B.code,idEnvironment:a.selected.id,measure:R}}t(e),q()}},"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"))},Se={name:"",description:"",type:{id:0,name:""},ownerType:{id:0,type:""}},we="\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0442\u0438\u043f \u043e\u0431'\u0454\u043a\u0442\u0443",Ie="\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0444\u043e\u0440\u043c\u0443 \u0432\u043b\u0430\u0441\u043d\u043e\u0441\u0442\u0456",Pe=function(e){var t=e.onHide,a=e.show,l=e.coordinates,c=e.setShouldFetchData,i=e.isEditPointMode,u=e.setIsEditPointMode,s=e.pointId,m=e.setPointId,d=e.user,E=Object(n.useState)(Se.name),h=Object(o.a)(E,2),p=h[0],g=h[1],v=Object(n.useState)(Se.description),b=Object(o.a)(v,2),j=b[0],C=b[1],k=Object(n.useState)(Se.type),_=Object(o.a)(k,2),S=_[0],w=_[1],P=Object(n.useState)(Se.ownerType),M=Object(o.a)(P,2),N=M[0],F=M[1],z=Object(n.useState)([]),D=Object(o.a)(z,2),A=D[0],G=D[1],L=Object(n.useState)([]),H=Object(o.a)(L,2),T=H[0],U=H[1],B=function(){g(Se.name),C(Se.description),w(Se.type),F(Se.ownerType)},W=function(){i||B(),t()};return Object(n.useEffect)((function(){O("/typeofobjects").then((function(e){var t=e.data;G(t)})),O("/ownertypes").then((function(e){var t=e.data;U(t)}))}),[]),Object(n.useEffect)((function(){i&&s&&O("".concat("/point","/").concat(s)).then((function(e){var t=e.data,a=A.find((function(e){return e.id===t.type})),n=T.find((function(e){return e.id===t.owner_type.id}));a&&w(a),n&&F(n),g(t.name),C(t.description)}))}),[s,i]),r.a.createElement(I,{size:"lg",show:a,onHide:function(){return W()},header:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0430\u0431\u043e \u0440\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0442\u043e\u0447\u043a\u0443"},r.a.createElement(f.a,null,r.a.createElement(f.a.Group,null,r.a.createElement(de.a,null,r.a.createElement(de.a.Toggle,{size:"sm",variant:"success"},S.name||we),r.a.createElement(de.a.Menu,{className:"form-dropdown"},A.length&&A.map((function(e){return r.a.createElement(de.a.Item,{key:e.id,active:e===S,onClick:function(){return w(e)}},e.name)}))))),r.a.createElement(f.a.Group,null,r.a.createElement(de.a,null,r.a.createElement(de.a.Toggle,{size:"sm",variant:"success"},N.type||Ie),r.a.createElement(de.a.Menu,null,T.length&&T.map((function(e){return r.a.createElement(de.a.Item,{key:e.id,active:e===N,onClick:function(){return F(e)}},e.type)}))))),r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Enter name"),r.a.createElement(f.a.Control,{type:"input",value:p,onChange:function(e){return g(e.target.value)}})),r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Enter description"),r.a.createElement(f.a.Control,{as:"textarea",rows:"3",value:j,onChange:function(e){return C(e.target.value)}})),i?r.a.createElement(_e,{onSave:function(e){x("".concat("/point","/").concat(s),{name:p,description:j,type:S.id,owner_type_id:N.id,emission:e}).then((function(){B(),t(),c(!0),u(!1),m(null)})).catch((function(){c(!1),u(!1),m(null)}))}}):r.a.createElement(_e,{onSave:function(e){y("/point",{name:p,description:j,type:S.id,coordinates:l,emission:e,id_of_user:d.id_of_user,owner_type_id:N.id}).then((function(){B(),t(),c(!0)})).catch((function(){return c(!1)}))}})))},Me=a(318),Ne={brushColor:{r:0,g:0,b:0,a:1},lineThickness:1,name:"",type:"poligon",description:""},Fe=function(e){var t=e.onHide,a=e.show,l=e.coordinates,c=e.setShouldFetchData,i=e.setNewPolygonCoordinates,u=e.user,s=e.isEditPolygonMode,m=e.setIsEditPolygonMode,d=e.polygonId,E=e.setPolygonId,h=Object(n.useState)(Ne.lineThickness),p=Object(o.a)(h,2),g=p[0],v=p[1],b=Object(n.useState)(Ne.brushColor),j=Object(o.a)(b,2),C=j[0],k=j[1],_=Object(n.useState)(Ne.name),S=Object(o.a)(_,2),w=S[0],P=S[1],M=Object(n.useState)(Ne.description),N=Object(o.a)(M,2),F=N[0],z=N[1],D=function(){v(Ne.lineThickness),k(Ne.brushColor),P(Ne.name),z(Ne.description)};Object(n.useEffect)((function(){d&&s&&O("".concat("/polygon","/").concat(d)).then((function(e){var t=e.data;v(t.line_thickness),k({r:t.brush_color_r,g:t.bruch_color_g,b:t.brush_color_b,a:t.brush_alfa}),P(t.name),z(t.description)}))}),[d,s]);var A=function(){s||D(),t()};return r.a.createElement(I,{size:"lg",show:a,onHide:function(){return A()},header:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0430\u0431\u043e \u0440\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043f\u043e\u043b\u0456\u0433\u043e\u043d"},r.a.createElement(f.a,null,r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Choose color of the polygon and line thickness"),r.a.createElement(f.a.Control,{type:"number",value:g,onChange:function(e){return v(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(Me.SketchPicker,{color:C,onChangeComplete:function(e){var t=e.rgb;return k(t)}})),r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Enter name"),r.a.createElement(f.a.Control,{type:"input",value:w,onChange:function(e){return P(e.target.value)}})),r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Enter description"),r.a.createElement(f.a.Control,{as:"textarea",rows:"3",value:F,onChange:function(e){return z(e.target.value)}})),s?r.a.createElement(_e,{onSave:function(e){x("".concat("/polygon","/").concat(d),{brush_color_r:C.r,bruch_color_g:C.g,brush_color_b:C.b,brush_alfa:C.a,line_collor_r:C.r,line_color_g:C.g,line_color_b:C.b,line_alfa:C.a,line_thickness:Number(g),name:w,description:F,emission:e}).then((function(){D(),t(),i([]),c(!0),m(!1),E(null)})).catch((function(){m(!1),E(null),i([]),c(!1)}))}}):r.a.createElement(_e,{onSave:function(e){y("/polygon",{brush_color_r:C.r,bruch_color_g:C.g,brush_color_b:C.b,brush_alfa:C.a,line_collor_r:C.r,line_color_g:C.g,line_color_b:C.b,line_alfa:C.a,line_thickness:Number(g),name:w,id_of_user:Number(u.id_of_user),id_of_expert:Number(u.id_of_expert),type:Ne.type,description:F,points:l.map((function(e,t){return{latitude:e.lat,longitude:e.lng,order123:t+1}})),emission:e}).then((function(){D(),t(),i([]),c(!0)})).catch((function(){i([]),c(!1)}))}})))},ze=(a(641),function(e){var t,a=e.user,l=e.setFilteredItems,c=Object(n.useState)([]),i=Object(o.a)(c,2),u=i[0],m=i[1];Object(n.useEffect)((function(){O("/experts").then((function(e){var t=e.data;m(t)}))}),[]);return r.a.createElement(f.a,{onSubmit:function(e){e.preventDefault();var n=t,r=n.expertCheckbox,c=n.myCheckbox,o=Array.from(r).filter((function(e){return e.checked})).map((function(e){var t=e.value;return u.find((function(e){return+e.id_of_expert===+t}))}));c&&c.checked?l({isMyObjectsSelectionChecked:!0,items:[].concat(Object(V.a)(o),[a])}):l({isMyObjectsSelectionChecked:!1,items:o})},className:"filtration-form d-flex justify-content-center flex-column",ref:function(e){return t=e}},r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,r.a.createElement("b",null,"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0435\u043a\u0441\u043f\u0435\u0440\u0442\u0430")),u.length&&u.map((function(e){return r.a.createElement(f.a.Check,{label:e.expert_name,type:"checkbox",value:e.id_of_expert,key:e.id_of_expert,name:"expertCheckbox"})})),a&&r.a.createElement(f.a.Check,{label:"\u041c\u043e\u0457 \u043e\u0431'\u0454\u043a\u0442\u0438",type:"checkbox",value:a.id_of_user,key:a.id_of_user,name:"myCheckbox"})),r.a.createElement(s.a,{variant:"primary",type:"submit",className:"text-center"},"\u0417\u0430\u0441\u0442\u043e\u0441\u0443\u0432\u0430\u0442\u0438"))}),De=(a(642),{points:[],polygons:[{name:"",expertName:"",polygonPoints:[]}],filteredPolygons:[],filteredItems:{isMyObjectsSelectionChecked:!1,items:[]},filteredPoints:[],isAddPointModeEnabled:!1,isAddPolygonModeEnabled:!1,showPointModal:!1,showPolygonModal:!1,newPointCoordinates:[],newPolygonCoordinates:[],shouldFetchData:!0,isEditPointMode:!1,pointId:null,isEditPolygonMode:!1,polygonId:null}),Ae=function(e,t){return t?"Disable add ".concat(e," mode"):"Add ".concat(e," to the map")},Ge=function(e){var t=e.user,a=Object(n.useState)(De.filteredItems),l=Object(o.a)(a,2),c=l[0],i=l[1],u=Object(n.useState)(De.shouldFetchData),m=Object(o.a)(u,2),d=m[0],E=m[1],f=Object(n.useState)(De.filteredPoints),h=Object(o.a)(f,2),p=h[0],g=h[1],v=Object(n.useState)(De.isAddPointModeEnabled),b=Object(o.a)(v,2),y=b[0],j=b[1],C=Object(n.useState)(De.showPointModal),x=Object(o.a)(C,2),k=x[0],S=x[1],w=Object(n.useState)(De.newPointCoordinates),I=Object(o.a)(w,2),P=I[0],M=I[1],N=Object(n.useState)(De.filteredPolygons),F=Object(o.a)(N,2),D=F[0],A=F[1],G=Object(n.useState)(De.isAddPolygonModeEnabled),L=Object(o.a)(G,2),H=L[0],T=L[1],U=Object(n.useState)(De.showPolygonModal),B=Object(o.a)(U,2),W=B[0],J=B[1],K=Object(n.useState)(De.newPolygonCoordinates),R=Object(o.a)(K,2),Q=R[0],X=R[1],ee=Object(n.useState)(De.isEditPointMode),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(De.pointId),le=Object(o.a)(re,2),ce=le[0],oe=le[1],ie=Object(n.useState)(De.isEditPolygonMode),ue=Object(o.a)(ie,2),se=ue[0],me=ue[1],de=Object(n.useState)(De.polygonId),Ee=Object(o.a)(de,2),fe=Ee[0],he=Ee[1],ge=Object(n.useContext)(z),ve=ge.environmentsInfo,ye=ge.setEnvironmentsInfo,je=function(e){var t=e.id_of_expert;return c.items.some((function(e){var a=e.id_of_expert;return t===a}))},Oe=function(e){var t=e.id_of_user;return c.items.some((function(e){var a=e.id_of_user;return t===a}))};Object(n.useEffect)((function(){ve.environments.length&&!ve.selected&&ye({selected:ve.environments[0],environments:ve.environments})}),[ve.environments]),Object(n.useEffect)((function(){d&&ve.selected&&(!function(){var e=ve.selected.id;O("".concat("/polygons","?idEnvironment=").concat(e)).then((function(e){var t=e.data;A(t),De.polygons=t})),O("".concat("/points","?idEnvironment=").concat(e)).then((function(e){var t=e.data;g(t),De.points=t}))}(),E(!1))}),[d,ve.selected]),Object(n.useEffect)((function(){if(c.items.length){var e=[],t=[];if(e=De.polygons.filter(je),t=De.points.filter(je),c.isMyObjectsSelectionChecked){var a=De.polygons.filter(Oe),n=De.points.filter(Oe);e=[].concat(Object(V.a)(e),Object(V.a)(a)),t=[].concat(Object(V.a)(t),Object(V.a)(n))}t=$(t,"Id"),e=$(e,"polygonId"),g(t),A(e)}else g(De.points),A(De.polygons)}),[c]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{center:_,zoom:6,maxZoom:15,attributionControl:!0,zoomControl:!0,doubleClickZoom:!0,scrollWheelZoom:!0,dragging:!0,animate:!0,easeLinearity:.35,onClick:function(e){var t=e.latlng,a=t.lat,n=t.lng;if(y)return M([a,n]),void S(!0);H&&X([].concat(Object(V.a)(Q),[{lat:a,lng:n}]))}},r.a.createElement(Z.a,{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}),r.a.createElement(pe,{polygons:D,setPolygonId:he,setIsEditPolygonMode:me,setShowPolygonModal:J}),r.a.createElement(be,{points:p,setPointId:oe,setIsEditPointMode:ne,setShowPointModal:S})),t&&r.a.createElement(q.a,{expand:"lg",className:"map-options"},r.a.createElement(s.a,{size:"sm",variant:y?"outline-danger":"outline-primary",onClick:function(){return j(!y)}},Ae("point",y)),r.a.createElement(s.a,{className:"ml-3",size:"sm",variant:H?"outline-danger":"outline-primary",onClick:function(){return T(!H)}},Ae("polygon",H)),H&&r.a.createElement(s.a,{className:"ml-3",size:"sm",variant:"outline-success",onClick:function(){T(!1),Q.length>=3?J(!0):X([])}},"Finish polygon")),r.a.createElement(ze,{user:t,setFilteredItems:i}),r.a.createElement(Pe,{show:k,onHide:function(){return S(!1)},setShouldFetchData:E,coordinates:P,isEditPointMode:ae,setIsEditPointMode:ne,pointId:ce,setPointId:oe,user:t}),r.a.createElement(Fe,{show:W,onHide:function(){return J(!1)},setShouldFetchData:E,setNewPolygonCoordinates:X,coordinates:Q,user:t,isEditPolygonMode:se,setIsEditPolygonMode:me,polygonId:fe,setPolygonId:he}))},Le=function(){var e=r.a.useState({}),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(F),s=Object(o.a)(c,2),m=s[0],d=s[1];return r.a.useEffect((function(){l(JSON.parse(sessionStorage.getItem("user")))}),[]),Object(n.useEffect)((function(){O("/environments").then((function(e){var t=e.data;return d({selected:null,environments:t})}))}),[]),r.a.createElement(i.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(z.Provider,{value:{environmentsInfo:m,setEnvironmentsInfo:d}},r.a.createElement(D,{user:a,setUser:l}),r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:R}),r.a.createElement(u.a,{path:"/earth",component:function(){return r.a.createElement(Ge,{user:a})}})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(643);c.a.render(r.a.createElement(Le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[342,1,2]]]);
//# sourceMappingURL=main.3ba089be.chunk.js.map